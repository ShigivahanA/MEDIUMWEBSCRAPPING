const puppeteer = require('puppeteer');

(async () => {
    // Launch a new browser instance
    const browser = await puppeteer.launch({ headless: false }); // Set to true if you don't need a UI
    const page = await browser.newPage();

    // Navigate to Medium
    await page.goto('https://medium.com/');

    // Set your Medium integration token as a cookie or use it to authenticate
    // Assuming you need to set a cookie with the token
    await page.setCookie({
        name: 'mediumToken',
        value: '2b855abf9666b8fe2d8dbed6368e7dabe1e3a52c852e246553edfab1e8d6f363c',
        domain: '.medium.com',
        path: '/',
        httpOnly: true,
        secure: true
    });

    // Reload the page with the authenticated session
    await page.reload();

    // Now you can navigate to a page containing articles and scrape the data
    await page.goto('https://medium.com/tag/python');

    // Example of scraping article titles
    const articles = await page.evaluate(() => {
        return Array.from(document.querySelectorAll('h2')).map(article => article.innerText);
    });

    console.log(articles);

    // Close the browser
    await browser.close();
})();
